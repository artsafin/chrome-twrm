<link rel="import" href="../../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/iron-form/iron-form.html">
<link rel="import" href="../../../bower_components/iron-grid/iron-grid.html">
<link rel="import" href="../../../bower_components/paper-fab/paper-fab.html">

<dom-module id="options-form">
    <style>
        paper-input-container {
            width: 90%;
        }

        paper-input {
            padding: 0 !important;
        }

        paper-toolbar .title {
            margin-left: 0 !important;
        }

        form {
            padding: 0.5em;
        }

        paper-fab {
            position: absolute;
            right: 2px;
            bottom: 2px;
        }
    </style>
    <template>
        <form is="iron-form">
            <paper-input label="Teamwox URL" id="twUrl" pattern="https?://.+" error-message="Mandatory setting"
                         value="{{data.twUrl}}"></paper-input>
            <paper-input label="Redmine URL" id="redmineUrl" type="url" error-message="Mandatory setting"
                         value="{{data.redmineUrl}}"></paper-input>
            <paper-input label="Redmine project" id="redmineProject" pattern=".+" error-message="Mandatory setting" type="text"
                         value="{{data.redmineProject}}"></paper-input>
            <paper-input label="Redmine project ID" id="redmineProjectId" pattern="\d+" error-message="Mandatory setting" type="text"
                         value="{{data.redmineProjectId}}"></paper-input>
            <paper-input label="Redmine API Key" id="redmineApiKey" type="text"
                         value="{{data.redmineApiKey}}"></paper-input>
            <paper-input label="API URL" id="apiUrl" type="text"
                         value="{{data.apiUrl}}"></paper-input>
            <paper-textarea label="Moar magic" id="overridesStr"
                            value="{{data.overridesStr}}"></paper-textarea>
        </form>
        <paper-fab icon="save" on-click="save"></paper-fab>
        <paper-toast id="toastSuccess" text="Settings saved!"></paper-toast>
    </template>
    <script>
        Polymer({
            is: "options-form",
            properties: {
                data: {
                    type: Object,
                    notify: true,
                    value: {},
                    reflectToAttribute: true
                }
            },
            toast: function (action) {
                if (action == 'success') {
                    this.$.toastSuccess.open();
                }
            },
            save: function () {
                this.fire('saveclick');
            }
        });
    </script>
</dom-module>